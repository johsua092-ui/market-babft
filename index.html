<!DOCTYPE html>
<html>
<head>
    <title>OXYX Market</title>
    <style>
        body { background: black; color: white; font-family: Arial; padding: 20px; }
        .box { background: #1a1a2a; border: 2px solid purple; border-radius: 10px; padding: 15px; margin: 10px 0; }
        input, button { padding: 10px; margin: 5px; background: #333; color: white; border: 1px solid purple; border-radius: 5px; }
        button { background: purple; cursor: pointer; }
        h1 { color: #c800ff; }
    </style>
</head>
<body>
    <h1>OXYX MARKET</h1>
    
    <!-- KEY SECTION -->
    <div class="box">
        <h3>üîê MOD KEY</h3>
        <input type="text" id="keyInput" placeholder="Enter key (owner/mod1/mod2)">
        <button onclick="checkKey()">ACTIVATE</button>
        <p id="keyStatus"></p>
    </div>
    
    <!-- MOD SERVER (HIDDEN) -->
    <div id="modPanel" style="display:none;" class="box">
        <h3 style="color:gold;">üí¨ MOD SERVER</h3>
        <div id="chatBox" style="height:200px; overflow-y:auto; background:#0a0a1a; padding:10px; margin:10px 0;"></div>
        <input type="text" id="chatMsg" placeholder="Type message" style="width:70%;">
        <button onclick="sendChat()">SEND</button>
    </div>
    
    <!-- UPLOAD BUILD -->
    <div class="box">
        <h3>üì§ UPLOAD BUILD</h3>
        <input type="text" id="buildName" placeholder="Build name"><br>
        <input type="number" id="buildPrice" placeholder="Price (min 100)" min="100" value="100"><br>
        <input type="file" id="buildFile" accept=".build"><br>
        <button onclick="publishBuild()">PUBLISH</button>
    </div>
    
    <!-- MARKETPLACE -->
    <div class="box">
        <h3>üè™ MARKETPLACE</h3>
        <div id="marketGrid"></div>
    </div>

    <script>
        // DATA
        let builds = JSON.parse(localStorage.getItem('builds')) || [];
        let messages = JSON.parse(localStorage.getItem('messages')) || [];
        let isMod = false;
        let currentUser = '';
        
        // TAMPILKAN BUILD
        function showBuilds() {
            let html = '';
            if (builds.length === 0) {
                html = '<p style="color:#666;">Belum ada build</p>';
            } else {
                builds.forEach(b => {
                    html += `<div style="border:1px solid purple; margin:10px; padding:10px;">
                        <b>${b.name}</b> - ${b.price} Robux<br>
                        <small>File: ${b.file} | Seller: ${b.seller}</small>
                    </div>`;
                });
            }
            document.getElementById('marketGrid').innerHTML = html;
        }
        showBuilds();
        
        // CEK KEY
        function checkKey() {
            let key = document.getElementById('keyInput').value;
            
            if (key === 'owner' || key === 'mod1' || key === 'mod2') {
                isMod = true;
                currentUser = key;
                document.getElementById('modPanel').style.display = 'block';
                document.getElementById('keyStatus').innerHTML = '‚úÖ Activated as ' + key;
                showChat();
            } else {
                alert('Key salah! Coba: owner, mod1, atau mod2');
            }
        }
        
        // CHAT
        function sendChat() {
            if (!isMod) {
                alert('Aktivasi dulu!');
                return;
            }
            
            let msg = document.getElementById('chatMsg').value;
            if (!msg) return;
            
            messages.push({
                user: currentUser,
                msg: msg,
                time: new Date().toLocaleTimeString()
            });
            
            localStorage.setItem('messages', JSON.stringify(messages));
            document.getElementById('chatMsg').value = '';
            showChat();
        }
        
        function showChat() {
            let html = '';
            if (messages.length === 0) {
                html = '<p style="color:#666;">Belum ada chat</p>';
            } else {
                messages.forEach(m => {
                    html += `<div style="border-bottom:1px solid #333; padding:5px;">
                        <b>${m.user}:</b> ${m.msg} 
                        <small style="color:#666; float:right;">${m.time}</small>
                    </div>`;
                });
            }
            document.getElementById('chatBox').innerHTML = html;
        }
        
        // PUBLISH BUILD
        function publishBuild() {
            let name = document.getElementById('buildName').value;
            let price = document.getElementById('buildPrice').value;
            let file = document.getElementById('buildFile').files[0];
            
            if (!name || !price || !file) {
                alert('Semua harus diisi!');
                return;
            }
            
            if (!file.name.toLowerCase().endsWith('.build')) {
                alert('File harus .build!');
                return;
            }
            
            if (price < 100) {
                alert('Harga minimal 100 Robux!');
                return;
            }
            
            builds.push({
                name: name,
                price: price,
                file: file.name,
                seller: isMod ? currentUser : 'Guest',
                date: new Date().toLocaleString()
            });
            
            localStorage.setItem('builds', JSON.stringify(builds));
            showBuilds();
            
            document.getElementById('buildName').value = '';
            document.getElementById('buildPrice').value = '100';
            document.getElementById('buildFile').value = '';
            
            alert('‚úÖ Build berhasil dipublish!');
        }
    </script>
</body>
</html>
