<!DOCTYPE html>
<html>
<head>
    <title>OXYX | FORENSIC MONITOR</title>
    <style>
        :root { --p-color: #b300ff; --danger: #ff0000; }
        body { background: #050505; color: white; font-family: 'Consolas', monospace; padding: 20px; }
        .monitor-card { 
            background: #0a0a14; border: 1px solid #222; border-radius: 10px; padding: 20px;
            box-shadow: 0 0 30px rgba(0,0,0,1); margin-bottom: 20px;
        }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #1a1a1a; font-size: 12px; }
        th { color: var(--p-color); text-transform: uppercase; }
        .ip-highlight { color: #00ff00; font-weight: bold; }
        .device-id { color: #00d9ff; font-size: 10px; }
        .isp-tag { color: #ffa500; font-style: italic; }
        .live-pulse { height: 8px; width: 8px; background: #00ff00; border-radius: 50%; display: inline-block; margin-right: 5px; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.2; } 100% { opacity: 1; } }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="monitor-card">
        <h2><span class="live-pulse"></span> OXYX REAL-TIME FORENSIC TRACKER</h2>
        <p style="font-size: 11px; color: #555;">ID OWNER TERVERIFIKASI: oxyX Britania9920</p>
        
        <table>
            <thead>
                <tr>
                    <th>Waktu</th>
                    <th>Alamat IP Asli</th>
                    <th>Lokasi & ISP</th>
                    <th>Hardware Fingerprint (Device ID)</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody id="trackerTable">
                </tbody>
        </table>
    </div>

    <script>
        // CONFIG
        const OWNER_ID = "oxyX Britania9920";

        // GENERATE HARDWARE FINGERPRINT ASLI
        function getHardwareID() {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl');
            const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
            const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
            // Gabungan Renderer GPU + Resolusi + Cores + OS
            return btoa(renderer + navigator.hardwareConcurrency + screen.width + navigator.userAgent).substring(0, 16);
        }

        // AMBIL IP DAN DATA LOKASI ASLI
        async function captureVisitorData() {
            try {
                // Menggunakan API ipapi untuk data IP & ISP murni
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                
                const table = document.getElementById('trackerTable');
                const time = new Date().toLocaleTimeString();
                const hid = getHardwareID();

                // Logika: Jika pengunjung adalah Tuan, beri tanda khusus
                const isOwner = (hid === "TuanPunyaID" || data.ip === "IP_TUAN"); // Contoh logic

                const newRow = `
                    <tr>
                        <td>${time}</td>
                        <td class="ip-highlight">${data.ip}</td>
                        <td>
                            <div>${data.city}, ${data.country_name}</div>
                            <div class="isp-tag">${data.org}</div>
                        </td>
                        <td class="device-id">HWID_${hid}</td>
                        <td>
                            <button onclick="banThis('${data.ip}', 'HWID_${hid}')" style="background:red; color:white; border:none; cursor:pointer; padding:5px;">BAN</button>
                        </td>
                    </tr>
                `;
                
                // Menambahkan data ke baris paling atas
                table.innerHTML = newRow + table.innerHTML;

                // KIRIM DATA KE DATABASE TUAN (JSONBin)
                saveToDatabase(data.ip, hid, data.org);

            } catch (error) {
                console.error("Gagal melacak data.");
            }
        }

        async function saveToDatabase(ip, hwid, isp) {
            // Sesuai prosedur Tuan sebelumnya untuk sinkronisasi JSONBin
            // Ini akan mencatat siapa saja yang login ke Marketplace Tuan
        }

        function banThis(ip, hwid) {
            const confirmBan = confirm("Konfirmasi Purge untuk IP: " + ip + "?");
            if(confirmBan) {
                alert("IP " + ip + " dan " + hwid + " telah dimasukkan ke Global Blacklist.");
                // Eksekusi fungsi Ban Tuan di sini
            }
        }

        // Jalankan pelacakan saat ada yang masuk
        captureVisitorData();
        
        // Refresh otomatis setiap 30 detik untuk memantau trafik baru
        setInterval(captureVisitorData, 30000);
    </script>
</body>
</html>
