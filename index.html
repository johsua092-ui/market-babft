<!DOCTYPE html>
<html>
<head>
    <title>OXYX MARKET | CLOUD SECURITY</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',Arial,sans-serif; user-select: none; }
        body { background:#0a0a0a; color:white; padding:20px; }
        .container { max-width:1200px; margin:0 auto; }
        h1 { font-size:4em; text-align:center; color:#b300ff; text-shadow:0 0 20px #b300ff; margin-bottom:30px; }
        .card { background:#1a1a2a; border:2px solid #b300ff; border-radius:15px; padding:20px; margin-bottom:20px; }
        input, select, textarea { width:100%; padding:12px; margin:8px 0; background:#2a2a3a; border:1px solid #333; border-radius:5px; color:white; outline: none; }
        button { width:100%; padding:15px; background:#b300ff; border:none; border-radius:5px; color:white; font-weight:bold; cursor:pointer; }
        .hidden { display:none !important; }
        #banOverlay { position: fixed; top:0; left:0; width:100%; height:100%; background: black; z-index: 9999; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .status-tag { font-size: 10px; color: #666; text-align: right; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="banOverlay">
        <h1 style="color: red; font-size: 3em;">IP & DEVICE BANNED</h1>
        <p style="color: white; margin-top: 20px;">Your hardware identity has been blacklisted from OXYX servers.</p>
    </div>

    <div class="container">
        <h1>‚ö° OXYX MARKET ‚ö°</h1>
        <p class="status-tag">HARDWARE ID: <span id="myID">Scanning...</span></p>

        <div id="uploadCard" class="card">
            <h2>üì§ PUBLISH BUILD</h2>
            <input type="file" id="buildFile">
            <input type="text" id="buildName" placeholder="Build Name">
            <textarea id="buildDesc" placeholder="Description"></textarea>
            <select id="buildType">
                <option value="">-- Type --</option>
                <option value="free">Non-Premium</option>
                <option value="premium">Premium</option>
            </select>
            <button onclick="publishBuild()">PUBLISH</button>
        </div>

        <div id="ownerPanel" class="card hidden">
            <h2 style="color: gold;">üëë THE EMINENCE CONTROL</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h3>BAN DEVICE/IP</h3>
                    <input type="text" id="banTarget" placeholder="Paste Hardware ID atau IP">
                    <button onclick="actionBan('ADD')" style="background: red;">PURGE (BAN)</button>
                </div>
                <div>
                    <h3>ACTIVE BLACKLIST</h3>
                    <select id="banListDisplay" style="height: 45px;"></select>
                    <button onclick="actionBan('DEL')" style="background: green;">REDEEM (UNBAN)</button>
                </div>
            </div>
        </div>

        <div id="loginCard" class="card">
            <h2>üîê STAFF ACCESS</h2>
            <input type="text" id="staffUser" placeholder="Username">
            <input type="password" id="staffPass" placeholder="Master Key">
            <button onclick="handleStaff()" style="background: gold; color: black;">AUTHENTICATE</button>
        </div>
    </div>

    <script>
        // ========== CLOUD CONFIG ==========
        const JSONBIN = {
            ID: '69a24d2a43b1c97be9a53651',
            KEY: '$2a$10$hQHmQJhNStn.YXwhwNsoXuovmgMcA1cXfyL3lIrlznz76I357CwoS'
        };

        const OWNER_ID = "oxyX Britania9920";
        // Simulasi Fingerprint Device
        const currentDeviceId = navigator.userAgent.length + "-" + screen.width + "-" + OWNER_ID; 
        document.getElementById('myID').innerText = currentDeviceId;

        let cloudData = { blacklist: [], staffSlots: [] };

        // ========== SYNC WITH CLOUD ==========
        async function syncCloud(newData = null) {
            const method = newData ? 'PUT' : 'GET';
            const body = newData ? JSON.stringify(newData) : null;
            
            try {
                let res = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN.ID}`, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': JSONBIN.KEY
                    },
                    body: body
                });
                let json = await res.json();
                cloudData = json.record || json.data;
                checkSecurity();
                renderBanList();
            } catch (e) { console.error("Cloud Sync Failed"); }
        }

        // ========== SECURITY ENGINE ==========
        function checkSecurity() {
            if (cloudData.blacklist.includes(currentDeviceId)) {
                document.getElementById('banOverlay').style.display = 'flex';
                throw new Error("Banned");
            }
        }

        // ========== OWNER ACTIONS ==========
        async function actionBan(type) {
            const target = document.getElementById('banTarget').value.trim();
            const select = document.getElementById('banListDisplay').value;

            if (type === 'ADD' && target) {
                if (!cloudData.blacklist.includes(target)) cloudData.blacklist.push(target);
            } else if (type === 'DEL' && select) {
                cloudData.blacklist = cloudData.blacklist.filter(id => id !== select);
            }
            
            await syncCloud(cloudData);
            alert("Database Updated");
        }

        function renderBanList() {
            const list = document.getElementById('banListDisplay');
            list.innerHTML = cloudData.blacklist.map(id => `<option value="${id}">${id}</option>`).join('');
        }

        // ========== BUILD VALIDATION ==========
        function publishBuild() {
            const file = document.getElementById('buildFile').files[0];
            const name = document.getElementById('buildName').value.trim();
            const desc = document.getElementById('buildDesc').value.trim();
            const type = document.getElementById('buildType').value;

            if (!file) return alert("‚ö†Ô∏è Tolong upload file build anda!");
            if (!name) return alert("‚ö†Ô∏è Tolong beri nama buildnya!");
            if (!desc) return alert("‚ö†Ô∏è Tolong tulis deskripsi build!");
            if (!type) return alert("‚ö†Ô∏è Tolong pilih type build nya!");

            alert(`‚úÖ Build "${name}" sukses di-publish ke ${type} Marketplace!`);
        }

        // ========== STAFF LOGIN ==========
        async function handleStaff() {
            const u = document.getElementById('staffUser').value.trim();
            const p = document.getElementById('staffPass').value.trim();

            if (u === 'znyt' && p === 'Root!Delta_7KpZ') {
                if (currentDeviceId.includes(OWNER_ID)) {
                    document.getElementById('ownerPanel').classList.remove('hidden');
                    document.getElementById('loginCard').classList.add('hidden');
                    alert("Welcome, Great Ruler.");
                } else {
                    alert("Unauthorized Device!");
                }
            }
        }

        // Initial Sync
        syncCloud();
        
        // Anti-Inspect
        setInterval(() => { debugger; }, 100);
    </script>
</body>
</html>
