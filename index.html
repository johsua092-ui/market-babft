<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OXYX MARKET - BUILD A BOAT</title>
    
    <!-- ANTI DEVTOOLS SUPER -->
    <script>
        // Blok semua shortcut
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                (e.ctrlKey && e.shiftKey && e.key === 'J') ||
                (e.ctrlKey && e.key === 'u') ||
                (e.ctrlKey && e.key === 's') ||
                (e.ctrlKey && e.key === 'p')) {
                e.preventDefault();
                alert('üîí Akses developer tools diblokir!');
                return false;
            }
        });
        
        // Blok right click
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            alert('üîí Right click diblokir!');
            return false;
        });
    </script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }
        body { background: #0a0a0a; color: white; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #b87cff; text-align: center; margin-bottom: 20px; }
        .card { background: #1a1a2a; border: 2px solid #9f4dff; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
        
        /* DEVICE INFO */
        .device-info { background: #0a0a1a; padding: 15px; border-radius: 5px; font-family: monospace; }
        .device-id { color: #00ff00; word-break: break-all; }
        .ip-address { color: #ffaa00; }
        
        /* STATS */
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0; }
        .stat-card { background: #2a2a3a; border: 2px solid #9f4dff; border-radius: 5px; padding: 15px; text-align: center; }
        .stat-number { font-size: 2em; color: gold; font-weight: bold; }
        .stat-label { color: #b07cff; }
        
        /* LOGIN SECTION */
        .login-section { display: flex; gap: 10px; margin: 15px 0; flex-wrap: wrap; }
        .login-section input { flex: 1; padding: 12px; background: #2a2a3a; border: 2px solid #9f4dff; border-radius: 5px; color: white; }
        button { padding: 12px 25px; background: #9f4dff; border: none; border-radius: 5px; color: white; font-weight: bold; cursor: pointer; }
        button:hover { background: #b87cff; }
        .logout-btn { background: #aa0000; }
        .logout-btn:hover { background: #ff0000; }
        
        /* ADMIN LINK */
        .admin-link { text-align: center; margin: 10px 0; }
        .admin-link a { color: gold; text-decoration: none; font-weight: bold; }
        .admin-link a:hover { text-decoration: underline; }
        
        /* BAN INFO */
        .ban-info { background: #3a1a1a; border: 2px solid #ff4444; border-radius: 5px; padding: 15px; margin: 10px 0; text-align: center; }
        
        /* USER INFO */
        .user-info { background: #1a1a2a; border: 2px solid gold; border-radius: 10px; padding: 15px; margin: 15px 0; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
        .role-badge { background: gold; color: black; padding: 5px 15px; border-radius: 20px; font-weight: bold; }
        
        /* CHAT */
        .chat-box { background: #0a0a1a; border: 2px solid #9f4dff; border-radius: 5px; padding: 15px; height: 200px; overflow-y: auto; margin: 15px 0; }
        .chat-message { padding: 8px; margin: 5px 0; background: #2a2a3a; border-radius: 5px; }
        .owner-text { color: gold; }
        .mod-text { color: #00ff00; }
        
        /* UPLOAD FORM */
        .form-group { margin: 15px 0; }
        .form-group label { display: block; color: #b07cff; margin-bottom: 5px; }
        .form-group input, .form-group textarea { width: 100%; padding: 12px; background: #2a2a3a; border: 2px solid #9f4dff; border-radius: 5px; color: white; }
        .price-note { color: #ffaa00; font-size: 0.9em; margin-top: 5px; }
        
        /* MARKETPLACE */
        .filter-section { display: flex; gap: 10px; margin: 20px 0; flex-wrap: wrap; }
        .filter-btn { background: #2a2a3a; border: 2px solid #9f4dff; }
        .filter-btn.active { background: #9f4dff; }
        .build-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }
        .build-card { background: #2a2a3a; border: 2px solid #9f4dff; border-radius: 5px; padding: 15px; }
        .build-card.premium { border-color: gold; box-shadow: 0 0 15px gold; }
        .build-price { color: gold; font-size: 1.2em; margin: 10px 0; }
        .delete-btn { width: 100%; padding: 10px; background: #aa0000; border: none; border-radius: 5px; color: white; margin-top: 5px; }
        .delete-btn:hover { background: #ff0000; }
        .hidden { display: none !important; }
        .footer { text-align: center; color: #666; margin-top: 30px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ö° OXYX MARKET - BUILD A BOAT ‚ö°</h1>
        
        <!-- DEVICE INFO -->
        <div class="card">
            <h2>üì± DEVICE INFORMATION</h2>
            <div class="device-info">
                <p>Device ID: <span class="device-id" id="deviceId">Loading...</span></p>
                <p>IP Address: <span class="ip-address" id="ipAddress">Loading...</span></p>
            </div>
        </div>
        
        <!-- LIVE STATS -->
        <div class="card">
            <h2>üìä LIVE MEMBER STATS</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalMembers">0</div>
                    <div class="stat-label">Total Members</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="onlineNow">0</div>
                    <div class="stat-label">Online Now</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalBuilds">0</div>
                    <div class="stat-label">Total Builds</div>
                </div>
            </div>
        </div>
        
        <!-- LOGIN SECTION -->
        <div class="card">
            <h2>üîê LOGIN</h2>
            <div class="login-section">
                <input type="text" id="username" placeholder="Enter username">
                <button onclick="login()">LOGIN</button>
            </div>
            <div class="login-section">
                <input type="text" id="adminUser" placeholder="Admin username">
                <input type="password" id="adminPass" placeholder="Password">
                <button onclick="adminLogin()">ADMIN LOGIN</button>
            </div>
            
            <!-- ADMIN LINK (HANYA UNTUK OWNER) -->
            <div id="adminLink" class="admin-link hidden">
                <a href="admin-panel.html" target="_blank">üîê BUKA ADMIN PANEL (LIHAT IP MEMBER)</a>
            </div>
            
            <div id="banMessage" class="ban-info hidden"></div>
            <div id="userInfo" class="user-info hidden">
                <span id="displayName"></span>
                <span class="role-badge" id="displayRole"></span>
                <button class="logout-btn" onclick="logout()">LOGOUT</button>
            </div>
        </div>
        
        <!-- MOD CHAT -->
        <div id="modChat" class="card hidden">
            <h2>üí¨ MODERATOR CHAT</h2>
            <div class="chat-box" id="chatMessages"></div>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="chatMsg" placeholder="Type message..." style="flex:1; padding:12px; background:#2a2a3a; border:2px solid #9f4dff; border-radius:5px; color:white;">
                <button onclick="sendChat()">SEND</button>
            </div>
        </div>
        
        <!-- UPLOAD BUILD -->
        <div id="uploadSection" class="card hidden">
            <h2>üì§ UPLOAD BUILD (Build A Boat)</h2>
            <div class="form-group">
                <label>Build Name</label>
                <input type="text" id="buildName" placeholder="e.g., Flying Dragon Ship">
            </div>
            <div class="form-group">
                <label>Price (Robux) - Premium minimal 100</label>
                <input type="number" id="buildPrice" min="0" value="0">
                <div class="price-note">üíé Premium: 100+ Robux | üÜì Free: 0 Robux</div>
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="buildDesc" rows="3" placeholder="Describe your build..."></textarea>
            </div>
            <div class="form-group">
                <label>Build File (.build)</label>
                <input type="file" id="buildFile" accept=".build">
            </div>
            <button onclick="uploadBuild()">PUBLISH BUILD</button>
        </div>
        
        <!-- MARKETPLACE -->
        <div class="card">
            <h2>üè™ MARKETPLACE (Build A Boat)</h2>
            <div class="filter-section">
                <button class="filter-btn active" onclick="filterBuilds('all', this)">üìã ALL</button>
                <button class="filter-btn" onclick="filterBuilds('free', this)">üÜì FREE (0)</button>
                <button class="filter-btn" onclick="filterBuilds('premium', this)">üíé PREMIUM (100+)</button>
                <button class="filter-btn" onclick="filterBuilds('my', this)">üë§ MY BUILDS</button>
            </div>
            <div class="build-grid" id="marketplace"></div>
        </div>
        
        <div class="footer">
            OXYX MARKET ‚Ä¢ Build A Boat Only ‚Ä¢ 1 Owner ‚Ä¢ 1 Moderator ‚Ä¢ Anti DevTools
        </div>
    </div>
    
    <script>
        // ========== DATA STORAGE ==========
        let currentUser = null;
        let currentFilter = 'all';
        let deviceId = '';
        let clientIP = 'Unknown';
        let loginAttempts = 0;
        
        // Default users
        let users = {
            owner: { password: 'owner_oxyx_2026', role: 'owner', ip: null, deviceId: null },
            mod1: { password: 'mod1_builder_2026', role: 'moderator', ip: null, deviceId: null }
        };
        
        // Members database (IP tracking)
        let members = JSON.parse(localStorage.getItem('members')) || [];
        
        // Banned users
        let bannedUsers = JSON.parse(localStorage.getItem('bannedUsers')) || [];
        
        // Builds
        let builds = JSON.parse(localStorage.getItem('builds')) || [
            {
                id: 1,
                name: "Golden Dragon Ship",
                price: 150,
                desc: "Epic golden dragon ship",
                fileName: "golden_dragon.build",
                seller: "owner",
                uploadedAt: new Date().toISOString()
            }
        ];
        
        // Chats
        let chats = JSON.parse(localStorage.getItem('chats')) || [];
        
        // ========== INIT ==========
        async function init() {
            // Generate device ID
            deviceId = 'DEVICE-' + Math.random().toString(36).substring(2) + Date.now().toString(36);
            document.getElementById('deviceId').textContent = deviceId;
            
            // Get IP
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                clientIP = data.ip;
                document.getElementById('ipAddress').textContent = clientIP;
            } catch (e) {
                document.getElementById('ipAddress').textContent = 'localhost';
            }
            
            // Update stats
            updateStats();
            
            // Display
            showBuilds();
            showChat();
        }
        
        // ========== STATS ==========
        function updateStats() {
            document.getElementById('totalMembers').textContent = members.length;
            document.getElementById('totalBuilds').textContent = builds.length;
            
            // Online now (members who logged in last 5 minutes)
            const fiveMinutesAgo = Date.now() - 5 * 60000;
            const online = members.filter(m => new Date(m.lastSeen).getTime() > fiveMinutesAgo).length;
            document.getElementById('onlineNow').textContent = online;
        }
        
        // ========== LOGIN ==========
        function login() {
            const username = document.getElementById('username').value.trim();
            if (!username) {
                alert('‚ùå Masukkan username!');
                return;
            }
            
            // Check if banned
            if (bannedUsers.some(u => u.username === username)) {
                alert('‚ùå User ini telah di-ban!');
                return;
            }
            
            // Record member login
            const existingMember = members.find(m => m.username === username);
            if (existingMember) {
                existingMember.lastSeen = new Date().toISOString();
                existingMember.ip = clientIP;
                existingMember.deviceId = deviceId;
                existingMember.loginCount++;
            } else {
                members.push({
                    username: username,
                    ip: clientIP,
                    deviceId: deviceId,
                    firstSeen: new Date().toISOString(),
                    lastSeen: new Date().toISOString(),
                    loginCount: 1
                });
            }
            localStorage.setItem('members', JSON.stringify(members));
            
            currentUser = {
                username: username,
                role: 'member'
            };
            
            loginSuccess();
            updateStats();
        }
        
        function adminLogin() {
            const username = document.getElementById('adminUser').value.trim();
            const password = document.getElementById('adminPass').value.trim();
            
            // Check admin credentials
            if (username === 'owner' && password === users.owner.password) {
                currentUser = {
                    username: 'owner',
                    role: 'owner'
                };
                
                // Show admin link
                document.getElementById('adminLink').classList.remove('hidden');
                
                // Record admin login
                const adminData = {
                    username: 'owner',
                    ip: clientIP,
                    deviceId: deviceId,
                    timestamp: new Date().toISOString()
                };
                localStorage.setItem('lastAdminLogin', JSON.stringify(adminData));
                
                loginSuccess();
            } else if (username === 'mod1' && password === users.mod1.password) {
                currentUser = {
                    username: 'mod1',
                    role: 'moderator'
                };
                loginSuccess();
            } else {
                alert('‚ùå Login gagal!');
            }
        }
        
        function loginSuccess() {
            document.getElementById('userInfo').classList.remove('hidden');
            document.getElementById('displayName').textContent = `üë§ ${currentUser.username}`;
            document.getElementById('displayRole').textContent = currentUser.role.toUpperCase();
            document.getElementById('uploadSection').classList.remove('hidden');
            
            if (currentUser.role === 'owner' || currentUser.role === 'moderator') {
                document.getElementById('modChat').classList.remove('hidden');
            }
            
            alert(`‚úÖ Selamat datang ${currentUser.username}!`);
        }
        
        function logout() {
            currentUser = null;
            document.getElementById('userInfo').classList.add('hidden');
            document.getElementById('uploadSection').classList.add('hidden');
            document.getElementById('modChat').classList.add('hidden');
            document.getElementById('adminLink').classList.add('hidden');
            alert('üëã Logged out');
        }
        
        // ========== CHAT ==========
        function sendChat() {
            if (!currentUser || (currentUser.role !== 'owner' && currentUser.role !== 'moderator')) {
                alert('‚ùå Hanya owner/moderator yang bisa chat!');
                return;
            }
            
            const msg = document.getElementById('chatMsg').value.trim();
            if (!msg) return;
            
            chats.push({
                id: Date.now(),
                user: currentUser.username,
                role: currentUser.role,
                msg: msg,
                time: new Date().toLocaleTimeString()
            });
            
            localStorage.setItem('chats', JSON.stringify(chats));
            document.getElementById('chatMsg').value = '';
            showChat();
        }
        
        function showChat() {
            const box = document.getElementById('chatMessages');
            if (chats.length === 0) {
                box.innerHTML = '<p style="color:#666;">Belum ada chat</p>';
                return;
            }
            
            box.innerHTML = chats.map(c => `
                <div class="chat-message">
                    <span class="${c.role}-text">${c.role === 'owner' ? 'üëë' : 'üõ°Ô∏è'} ${c.user}:</span>
                    ${c.msg}
                    <small style="color:#666; float:right;">${c.time}</small>
                </div>
            `).join('');
            box.scrollTop = box.scrollHeight;
        }
        
        // ========== UPLOAD ==========
        function uploadBuild() {
            if (!currentUser) {
                alert('‚ùå Login dulu!');
                return;
            }
            
            const name = document.getElementById('buildName').value.trim();
            const price = parseInt(document.getElementById('buildPrice').value);
            const desc = document.getElementById('buildDesc').value.trim();
            const file = document.getElementById('buildFile').files[0];
            
            if (!name || !desc || !file) {
                alert('‚ùå Isi semua field!');
                return;
            }
            
            if (!file.name.toLowerCase().endsWith('.build')) {
                alert('‚ùå File harus .build!');
                return;
            }
            
            builds.push({
                id: Date.now(),
                name: name,
                price: price,
                desc: desc,
                fileName: file.name,
                seller: currentUser.username,
                uploadedAt: new Date().toISOString()
            });
            
            localStorage.setItem('builds', JSON.stringify(builds));
            updateStats();
            
            document.getElementById('buildName').value = '';
            document.getElementById('buildPrice').value = '0';
            document.getElementById('buildDesc').value = '';
            document.getElementById('buildFile').value = '';
            
            alert('‚úÖ Build berhasil diupload!');
            showBuilds();
        }
        
        // ========== DELETE ==========
        function deleteBuild(id, seller) {
            if (!currentUser) {
                alert('‚ùå Login dulu!');
                return;
            }
            
            if (currentUser.role === 'owner' || currentUser.role === 'moderator' || seller === currentUser.username) {
                if (!confirm('Yakin ingin menghapus build ini?')) return;
                
                builds = builds.filter(b => b.id !== id);
                localStorage.setItem('builds', JSON.stringify(build
