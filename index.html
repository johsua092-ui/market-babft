<!DOCTYPE html>
<html>
<head>
    <title>OXYX MARKET | COMMAND CENTER</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Courier New', monospace; }
        body { background:#000; color:#b300ff; padding:20px; }
        .container { max-width:1400px; margin:0 auto; }
        
        /* THEME OWNER */
        h1 { font-size:4em; text-align:center; text-shadow:0 0 20px #b300ff; color:white; margin-bottom:20px; }
        .card { background:#0a0a0a; border:1px solid #b300ff; border-radius:5px; padding:20px; margin-bottom:20px; box-shadow:0 0 15px rgba(179,0,255,0.2); }
        
        /* PANEL OWNER - HARUS MUNCUL */
        #ownerPanel { border:2px solid gold; background:#050505; }
        .tab-btn { background:#1a1a1a; color:gold; border:1px solid gold; padding:10px; cursor:pointer; margin-right:5px; }
        .tab-btn.active { background:gold; color:black; }
        
        .tracker-table { width:100%; border-collapse:collapse; margin-top:15px; color:white; font-size:12px; }
        .tracker-table th { background:gold; color:black; padding:10px; text-align:left; }
        .tracker-table td { padding:10px; border-bottom:1px solid #222; }
        
        /* CHAT SYSTEM */
        #chatBox { height:200px; overflow-y:scroll; background:#000; border:1px solid #333; padding:10px; margin-bottom:10px; color:#00ff00; }
        
        /* BLACKLIST OVERLAY */
        #blacklistOverlay { position:fixed; top:0; left:0; width:100%; height:100%; background:black; color:red; display:flex; align-items:center; justify-content:center; font-size:3em; z-index:9999; display:none; }

        input, textarea, select { width:100%; padding:12px; margin:8px 0; background:#111; border:1px solid #b300ff; color:white; }
        button { width:100%; padding:15px; background:#b300ff; border:none; color:white; font-weight:bold; cursor:pointer; }
        .btn-ban { background:red; padding:5px; font-size:10px; }
        
        .hidden { display:none !important; }
        .market-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:20px; }
        .build-card { border:1px solid #333; background:#0a0a0a; overflow:hidden; }
    </style>
</head>
<body>
    <div id="blacklistOverlay">ACCESS TERMINATED - YOU ARE BLACKLISTED</div>

    <div class="container">
        <h1>OXYX COMMAND CENTER</h1>

        <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-bottom:20px;">
            <div class="card" style="text-align:center;"><h2>USERS</h2><span id="s_users">0</span></div>
            <div class="card" style="text-align:center;"><h2>BUILDS</h2><span id="s_builds">0</span></div>
            <div class="card" style="text-align:center; border-color:gold;"><h2 style="color:gold;">ONLINE</h2><span id="s_online">0</span></div>
        </div>

        <div id="ownerPanel" class="card hidden">
            <h2 style="color:gold;">üëë SUPREME OWNER ACCESS</h2>
            <div style="margin-top:10px;">
                <button class="tab-btn active" onclick="showTab('forensic')">FORENSIC</button>
                <button class="tab-btn" onclick="showTab('chat')">STAFF CHAT</button>
                <button class="tab-btn" onclick="showTab('blacklist')">BAN LIST</button>
                <button onclick="exportData()" style="width:auto; background:grey; padding:10px;">SYNC</button>
            </div>

            <div id="tab_forensic">
                <table class="tracker-table">
                    <thead><tr><th>User</th><th>IP Address</th><th>Device ID</th><th>Action</th></tr></thead>
                    <tbody id="trackerBody"></tbody>
                </table>
            </div>

            <div id="tab_chat" class="hidden">
                <div id="chatBox"></div>
                <div style="display:flex; gap:10px;">
                    <input type="text" id="chatMsg" placeholder="Type secret message...">
                    <button onclick="sendChat()" style="width:100px;">SEND</button>
                </div>
            </div>

            <div id="tab_blacklist" class="hidden">
                <h3>Banned IPs / Devices</h3>
                <div id="banListDisplay" style="color:red; margin-top:10px;"></div>
            </div>
        </div>

        <div id="loginCard" class="card">
            <h2>üîê IDENTIFICATION REQUIRED</h2>
            <input type="text" id="userIn" placeholder="Username">
            <input type="password" id="passIn" placeholder="Password">
            <button onclick="handleLogin()">AUTHENTICATE</button>
        </div>

        <div id="uploadCard" class="card hidden">
            <h2>üì§ UPLOAD SYSTEM (.BUILD ONLY)</h2>
            <input type="file" id="f_file" accept=".build">
            <textarea id="f_desc" placeholder="Build Info..."></textarea>
            <select id="f_type"><option value="free">FREE</option><option value="premium">PREMIUM</option></select>
            <input type="text" id="f_name" placeholder="Build Name">
            <input type="file" id="f_photo" accept="image/*">
            <button onclick="publishBuild()">EXECUTE PUBLISH</button>
            <button onclick="logout()" style="background:red; margin-top:5px;">TERMINATE SESSION</button>
        </div>

        <div class="card">
            <h2>üè™ DATABASE MARKETPLACE</h2>
            <div id="marketGrid" class="market-grid"></div>
        </div>
    </div>

    <script>
        let currentUser = JSON.parse(sessionStorage.getItem('oxy_v9_sess')) || null;
        let builds = JSON.parse(localStorage.getItem('oxy_v9_builds')) || [];
        let logs = JSON.parse(localStorage.getItem('oxy_v9_logs')) || [];
        let banned = JSON.parse(localStorage.getItem('oxy_v9_banned')) || [];
        let chats = JSON.parse(localStorage.getItem('oxy_v9_chats')) || [];
        let curIP = "";

        const myDID = btoa(navigator.userAgent + screen.width).substring(0, 15);

        // Security Check
        async function securityCheck() {
            const res = await fetch('https://api.ipify.org?format=json');
            const data = await res.json();
            curIP = data.ip;

            if(banned.includes(curIP) || banned.includes(myDID)) {
                document.getElementById('blacklistOverlay').style.display = 'flex';
                document.body.innerHTML = "TERMINATED";
            }
        }
        securityCheck();

        window.onload = () => { if(currentUser) showDashboard(); refreshMarket(); updateStats(); };

        function handleLogin() {
            const u = document.getElementById('userIn').value;
            const p = document.getElementById('passIn').value;

            if(u === 'znyt' && p === 'Root!Delta_7KpZ') currentUser = { name: u, role: 'owner' };
            else if((u === 'helper_tester' && p === 'huwydhdjsiqo') || (u === 'sigma' && p === 'uBwbONeqIwYQ97')) currentUser = { name: u, role: 'mod' };
            else currentUser = { name: u, role: 'member' };

            sessionStorage.setItem('oxy_v9_sess', JSON.stringify(currentUser));
            logs.push({ name: u, ip: curIP, did: myDID, time: new Date().toLocaleString() });
            localStorage.setItem('oxy_v9_logs', JSON.stringify(logs));
            location.reload();
        }

        function showDashboard() {
            document.getElementById('loginCard').classList.add('hidden');
            document.getElementById('uploadCard').classList.remove('hidden');
            if(currentUser.role === 'owner') {
                document.getElementById('ownerPanel').classList.remove('hidden');
                refreshTracker();
                refreshChat();
            }
        }

        function refreshTracker() {
            document.getElementById('trackerBody').innerHTML = logs.slice(-30).reverse().map(l => `
                <tr>
                    <td>${l.name}</td>
                    <td>${l.ip}</td>
                    <td>${l.did}</td>
                    <td>
                        <button class="btn-ban" onclick="ban('${l.ip}')">BAN IP</button>
                        <button class="btn-ban" onclick="ban('${l.did}')">BAN ID</button>
                    </td>
                </tr>
            `).join('');
            document.getElementById('banListDisplay').innerText = banned.join(', ');
        }

        function ban(target) {
            if(!banned.includes(target)) {
                banned.push(target);
                localStorage.setItem('oxy_v9_banned', JSON.stringify(banned));
                alert("Target Terminated!");
                refreshTracker();
            }
        }

        function showTab(t) {
            ['forensic', 'chat', 'blacklist'].forEach(id => document.getElementById('tab_'+id).classList.add('hidden'));
            document.getElementById('tab_'+t).classList.remove('hidden');
        }

        function sendChat() {
            const msg = document.getElementById('chatMsg').value;
            if(!msg) return;
            chats.push({ user: currentUser.name, msg: msg, time: new Date().toLocaleTimeString() });
            localStorage.setItem('oxy_v9_chats', JSON.stringify(chats));
            document.getElementById('chatMsg').value = "";
            refreshChat();
        }

        function refreshChat() {
            const box = document.getElementById('chatBox');
            box.innerHTML = chats.slice(-50).map(c => `<div>[${c.time}] <b>${c.user}</b>: ${c.msg}</div>`).join('');
            box.scrollTop = box.scrollHeight;
        }

        function publishBuild() {
            const f = document.getElementById('f_file').files[0];
            const name = document.getElementById('f_name').value;
            if(!f || !f.name.endsWith('.build')) return alert("Wajib .build!");
            if(!name) return alert("Beri nama!");

            const reader = new FileReader();
            reader.onload = (e) => {
                builds.push({ id: Date.now(), owner: currentUser.name, name: name, desc: document.getElementById('f_desc').value, type: document.getElementById('f_type').value, img: e.target.result });
                localStorage.setItem('oxy_v9_builds', JSON.stringify(builds));
                location.reload();
            };
            const photo = document.getElementById('f_photo').files[0];
            if(photo) reader.readAsDataURL(photo); else reader.onload({target:{result:null}});
        }

        function refreshMarket() {
            document.getElementById('marketGrid').innerHTML = builds.slice().reverse().map(b => `
                <div class="build-card">
                    <img src="${b.img || ''}" style="width:100%; height:150px; background:#111;">
                    <div style="padding:10px;">
                        <h3 style="color:gold;">${b.name}</h3>
                        <p style="font-size:10px;">By: ${b.owner}</p>
                        <button onclick="deleteBuild(${b.id})" style="background:red; padding:5px; margin-top:10px; font-size:10px;">DELETE</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteBuild(id) {
            builds = builds.filter(b => b.id !== id);
            localStorage.setItem('oxy_v9_builds', JSON.stringify(builds));
            refreshMarket();
        }

        function updateStats() {
            document.getElementById('s_users').innerText = logs.length;
            document.getElementById('s_builds').innerText = builds.length;
            document.getElementById('s_online').innerText = Math.floor(Math.random() * 5) + 1;
        }

        function exportData() { prompt("COPY SYNC CODE:", btoa(JSON.stringify({builds, logs, banned, chats}))); }
        function logout() { sessionStorage.clear(); location.reload(); }
    </script>
</body>
</html>
