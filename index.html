<!DOCTYPE html>
<html>
<head>
    <title>OXYX MARKET - 3D EDITION</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }
        
        body {
            background: #0a0a0a;
            color: white;
            min-height: 100vh;
            padding: 20px;
            perspective: 1000px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            transform-style: preserve-3d;
            animation: sceneRotate 20s infinite alternate ease-in-out;
        }
        
        @keyframes sceneRotate {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            100% { transform: rotateX(2deg) rotateY(2deg); }
        }
        
        /* GLITCH EFFECT 3D */
        h1 {
            font-size: 4em;
            font-weight: 900;
            text-align: center;
            color: #b300ff;
            text-shadow: 
                3px 3px 0 #ff00ff,
                -3px -3px 0 #00ffff,
                0 0 30px #b300ff;
            animation: glitch 3s infinite;
            transform: translateZ(30px);
            margin-bottom: 30px;
        }
        
        @keyframes glitch {
            0%,100% { transform: skew(0deg) translateZ(30px); }
            5% { transform: skew(5deg) translateZ(30px); }
            10% { transform: skew(-5deg) translateZ(30px); }
        }
        
        /* 3D CARDS */
        .card {
            background: rgba(26, 10, 42, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid #b300ff;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.5),
                0 0 0 2px rgba(180,0,255,0.3),
                0 0 30px #b300ff;
            transform: translateZ(20px);
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateZ(30px) scale(1.02);
        }
        
        /* STATS 3D */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            background: #2a0a3a;
            border: 2px solid gold;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transform: translateZ(15px);
            box-shadow: 0 10px 30px rgba(255,215,0,0.3);
        }
        
        .stat-value {
            font-size: 3em;
            font-weight: bold;
            color: gold;
            text-shadow: 0 0 20px gold;
        }
        
        .online-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            background: #00ff00;
            border-radius: 50%;
            animation: pulse 2s infinite;
            box-shadow: 0 0 15px #00ff00;
        }
        
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.3); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        /* DEVICE INFO */
        .device-info {
            background: #0a0a1a;
            border: 2px solid #b300ff;
            border-radius: 10px;
            padding: 15px;
            font-family: monospace;
            transform: translateZ(10px);
        }
        
        .device-id { color: #00ff00; }
        .ip-address { color: #ffaa00; }
        
        /* LOGIN SECTION */
        .login-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .login-box {
            background: #1a0a2a;
            border: 2px solid #b300ff;
            border-radius: 15px;
            padding: 20px;
        }
        
        input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: #2a2a3a;
            border: 2px solid #b300ff;
            border-radius: 10px;
            color: white;
            font-size: 1em;
            transform: translateZ(5px);
        }
        
        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #b300ff, #d400ff);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            transition: 0.3s;
            transform: translateZ(10px);
            border: 2px solid white;
        }
        
        button:hover {
            transform: scale(1.02) translateZ(20px);
            box-shadow: 0 0 40px #b300ff;
        }
        
        /* IP TABLE */
        .ip-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            transform: translateZ(15px);
        }
        
        .ip-table th {
            background: linear-gradient(45deg, #b300ff, #d400ff);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }
        
        .ip-table td {
            padding: 12px;
            border-bottom: 1px solid #333;
            background: rgba(26, 10, 42, 0.7);
        }
        
        .ip-table tr:hover {
            background: #2a0a3a;
        }
        
        .online-badge {
            color: #00ff00;
            font-weight: bold;
        }
        
        .offline-badge {
            color: #666;
        }
        
        /* CHAT */
        .chat-box {
            background: #0a0a1a;
            border: 2px solid #b300ff;
            border-radius: 10px;
            padding: 15px;
            height: 200px;
            overflow-y: auto;
            margin: 15px 0;
        }
        
        .chat-message {
            padding: 8px;
            margin: 5px 0;
            background: #2a2a3a;
            border-radius: 5px;
            border-left: 3px solid #b300ff;
        }
        
        .owner-text { color: gold; }
        .mod-text { color: #00ff00; }
        
        /* BUILD GRID */
        .build-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .build-card {
            background: #2a2a3a;
            border: 2px solid #b300ff;
            border-radius: 15px;
            padding: 20px;
            transform: translateZ(10px);
            transition: 0.3s;
        }
        
        .build-card:hover {
            transform: translateZ(20px) scale(1.02);
            box-shadow: 0 10px 30px rgba(180,0,255,0.5);
        }
        
        .build-card.premium {
            border-color: gold;
            box-shadow: 0 0 30px gold;
        }
        
        .build-price {
            color: gold;
            font-size: 1.3em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .download-btn {
            background: #00aa00;
            margin: 5px 0;
        }
        
        .delete-btn {
            background: #aa0000;
        }
        
        .filter-section {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            flex: 1;
            min-width: 100px;
        }
        
        .hidden {
            display: none !important;
        }
        
        .footer {
            text-align: center;
            color: #666;
            margin-top: 40px;
            padding: 20px;
            border-top: 2px solid #b300ff;
            transform: translateZ(5px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ö° OXYX MARKET 3D ‚ö°</h1>
        
        <!-- STATS -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-value" id="totalMembers">0</div>
                <div>Total Members</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="onlineNow">0</div>
                <div><span class="online-dot"></span> Online Now</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalBuilds">0</div>
                <div>Total Builds</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalIPs">0</div>
                <div>Unique IPs</div>
            </div>
        </div>
        
        <!-- DEVICE INFO -->
        <div class="card">
            <h2>üì± DEVICE INFO</h2>
            <div class="device-info">
                <p>Device ID: <span id="deviceId">LOADING...</span></p>
                <p>IP Address: <span id="ipAddress">LOADING...</span></p>
            </div>
        </div>
        
        <!-- LOGIN SECTION -->
        <div class="card">
            <h2>üîê LOGIN</h2>
            <div class="login-grid">
                <div class="login-box">
                    <h3>üë§ MEMBER</h3>
                    <input type="text" id="memberUsername" placeholder="Username">
                    <button onclick="loginMember()">LOGIN MEMBER</button>
                </div>
                <div class="login-box">
                    <h3>üëë ADMIN</h3>
                    <input type="text" id="adminUser" placeholder="Username">
                    <input type="password" id="adminPass" placeholder="Password">
                    <button onclick="loginAdmin()">LOGIN ADMIN</button>
                </div>
            </div>
            
            <div id="userInfo" class="hidden" style="margin-top:20px; padding:15px; background:#2a0a3a; border-radius:10px;">
                <p style="font-size:1.2em;">Logged in as: <span id="displayName"></span></p>
                <button onclick="logout()" style="background:#aa0000;">LOGOUT</button>
            </div>
        </div>
        
        <!-- IP TABLE (UNTUK OWNER) -->
        <div id="ipTableSection" class="card hidden">
            <h2>üëë IP TRACKER - MEMBER DATABASE (24 JAM)</h2>
            <table class="ip-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>IP Address</th>
                        <th>Device ID</th>
                        <th>Last Seen</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="ipTableBody"></tbody>
            </table>
        </div>
        
        <!-- MOD CHAT -->
        <div id="chatSection" class="card hidden">
            <h2>üí¨ MOD CHAT</h2>
            <div class="chat-box" id="chatMessages"></div>
            <input type="text" id="chatMsg" placeholder="Type message...">
            <button onclick="sendChat()">SEND</button>
        </div>
        
        <!-- UPLOAD -->
        <div id="uploadSection" class="card hidden">
            <h2>üì§ UPLOAD BUILD (Build A Boat)</h2>
            <input type="text" id="buildName" placeholder="Build name">
            <input type="number" id="buildPrice" min="0" value="0" placeholder="Price (100+ = premium)">
            <textarea id="buildDesc" rows="3" placeholder="Description"></textarea>
            <input type="file" id="buildFile" accept=".build">
            <button onclick="uploadBuild()">PUBLISH BUILD</button>
        </div>
        
        <!-- MARKETPLACE -->
        <div class="card">
            <h2>üè™ MARKETPLACE</h2>
            <div class="filter-section">
                <button class="filter-btn" onclick="filterBuilds('all')">üìã ALL</button>
                <button class="filter-btn" onclick="filterBuilds('free')">üÜì FREE (0)</button>
                <button class="filter-btn" onclick="filterBuilds('premium')">üíé PREMIUM (100+)</button>
                <button class="filter-btn" onclick="filterBuilds('my')">üë§ MY BUILDS</button>
            </div>
            <div class="build-grid" id="marketplace"></div>
        </div>
        
        <div class="footer">
            OXYX MARKET 3D ‚Ä¢ Build A Boat Only ‚Ä¢ 24h IP Tracking
        </div>
    </div>
    
    <script>
        // ========== DATA ==========
        let currentUser = null;
        let currentFilter = 'all';
        let deviceId = 'DEVICE-' + Math.random().toString(36).substring(2, 10).toUpperCase();
        let clientIP = '0.0.0.0';
        
        // Load dari localStorage
        let members = JSON.parse(localStorage.getItem('members')) || [];
        let builds = JSON.parse(localStorage.getItem('builds')) || [
            {id:1, name:"Dragon Boat", price:0, desc:"Cool dragon boat", file:"dragon.build", seller:"znyt"},
            {id:2, name:"Flying Ship", price:150, desc:"Flying ship with wings", file:"flying.build", seller:"helper_tester"},
            {id:3, name:"Golden Raft", price:200, desc:"Golden raft premium", file:"golden.build", seller:"sigma"}
        ];
        let chats = JSON.parse(localStorage.getItem('chats')) || [
            {user:"znyt", role:"owner", msg:"Welcome to OXYX Market!"}
        ];
        
        // ========== DEVICE & IP ==========
        document.getElementById('deviceId').innerText = deviceId;
        
        fetch('https://httpbin.org/ip')
            .then(res => res.json())
            .then(data => {
                clientIP = data.origin;
                document.getElementById('ipAddress').innerText = clientIP;
            })
            .catch(() => {
                clientIP = '127.0.0.1';
                document.getElementById('ipAddress').innerText = clientIP;
            });
        
        // ========== FUNCTIONS ==========
        function updateStats() {
            document.getElementById('totalMembers').innerText = members.length;
            document.getElementById('totalBuilds').innerText = builds.length;
            
            let online = members.filter(m => {
                let last = new Date(m.lastSeen).getTime();
                return Date.now() - last < 86400000; // 24 jam
            }).length;
            document.getElementById('onlineNow').innerText = online;
            
            let uniqueIPs = [...new Set(members.map(m => m.ip))].length;
            document.getElementById('totalIPs').innerText = uniqueIPs;
        }
        
        function saveMembers() {
            localStorage.setItem('members', JSON.stringify(members));
            updateStats();
            updateIpTable();
        }
        
        // ========== LOGIN MEMBER ==========
        window.loginMember = function() {
            let user = document.getElementById('memberUsername').value.trim();
            if (!user) { alert('Masukin nama!'); return; }
            
            let now = new Date().toISOString();
            let existing = members.find(m => m.username === user);
            
            if (existing) {
                existing.lastSeen = now;
                existing.loginCount = (existing.loginCount || 0) + 1;
            } else {
                members.push({
                    username: user,
                    ip: clientIP,
                    deviceId: deviceId,
                    firstSeen: now,
                    lastSeen: now,
                    loginCount: 1
                });
            }
            saveMembers();
            
            currentUser = { username: user, role: 'member' };
            showUserInfo();
            alert('‚úÖ Welcome ' + user);
        };
        
        // ========== LOGIN ADMIN ==========
        window.loginAdmin = function() {
            let user = document.getElementById('adminUser').value.trim();
            let pass = document.getElementById('adminPass').value.trim();
            
            // NEW PASSWORDS
            if (user === 'znyt' && pass === 'Root!Delta_7KpZ') {
                currentUser = { username: 'znyt', role: 'owner' };
                showUserInfo();
                document.getElementById('ipTableSection').classList.remove('hidden');
                updateIpTable();
                alert('‚úÖ Welcome OWNER');
            }
            else if (user === 'helper_tester' && pass === 'huwydhdjsiqo') {
                currentUser = { username: 'helper_tester', role: 'mod' };
                showUserInfo();
                document.getElementById('chatSection').classList.remove('hidden');
                alert('‚úÖ Welcome MODERATOR 1');
            }
            else if (user === 'sigma' && pass === 'uBwbONeqIwYQ97') {
                currentUser = { username: 'sigma', role: 'mod' };
                showUserInfo();
                document.getElementById('chatSection').classList.remove('hidden');
                alert('‚úÖ Welcome MODERATOR 2');
            }
            else {
                alert('‚ùå Wrong credentials');
            }
        };
        
        function showUserInfo() {
            document.getElementById('userInfo').classList.remove('hidden');
            document.getElementById('displayName').innerText = currentUser.username + ' (' + currentUser.role + ')';
            document.getElementById('uploadSection').classList.remove('hidden');
            if (currentUser.role === 'owner' || currentUser.role === 'mod') {
                document.getElementById('chatSection').classList.remove('hidden');
                displayChat();
            }
        }
        
        window.logout = function() {
            currentUser = null;
            document.getElementById('userInfo').classList.add('hidden');
            document.getElementById('uploadSection').classList.add('hidden');
            document.getElementById('chatSection').classList.add('hidden');
            document.getElementById('ipTableSection').classList.add('hidden');
            alert('Logged out');
        };
        
        // ========== IP TABLE ==========
        function updateIpTable() {
            let tbody = document.getElementById('ipTableBody');
            if (members.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5">Belum ada member</td></tr>';
                return;
            }
            
            let html = '';
            let last24h = Date.now() - 86400000;
            
            members.sort((a,b) => new Date(b.lastSeen) - new Date(a.lastSeen)).forEach(m => {
                let lastSeen = new Date(m.lastSeen).getTime();
                let isOnline = lastSeen > last24h;
                let status = isOnline ? '<span class="online-badge">üü¢ ONLINE (24h)</span>' : '<span class="offline-badge">‚ö´ OFFLINE</span>';
                
                html += `
                    <tr>
                        <td><b>${m.username}</b></td>
                        <td>${m.ip || 'Unknown'}</td>
                        <td>${(m.deviceId || '').substring(0,15)}...</td>
                        <td>${new Date(m.lastSeen).toLocaleString()}</td>
                        <td>${status}</td>
                    </tr>
                `;
            });
            tbody.innerHTML = html;
        }
        
        // ========== CHAT ==========
        window.sendChat = function() {
            if (!currentUser || currentUser.role === 'member') {
                alert('Only mods can chat');
                return;
            }
            let msg = document.getElementById('chatMsg').value.trim();
            if (!msg) return;
            
            chats.push({ user: currentUser.username, role: currentUser.role, msg: msg });
            localStorage.setItem('chats', JSON.stringify(chats));
            document.getElementById('chatMsg').value = '';
            displayChat();
        };
        
        function displayChat() {
            let box = document.getElementById('chatMessages');
            let html = '';
            chats.slice(-10).forEach(c => {
                let color
